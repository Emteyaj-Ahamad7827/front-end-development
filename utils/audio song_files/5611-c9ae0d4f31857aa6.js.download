(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5611],{25611:function(t,e,n){"use strict";n.r(e),n.d(e,{AppleMusicLink:function(){return w},appleMusicDomain:function(){return y},getAppleMusicHref:function(){return v},isAppleMusicDomain:function(){return k},useAppleMusicHref:function(){return C}});var o=n(57437),a=n(91631),i=n(89726),r=n(55807),s=n(94076),l=n(59715),c=n(2265),u=n(98024),d=n(10875),m=n(70225),p=n.n(m),f=n(71010),h=n(91017),g=n(72211);function w(t){let{trackId:e,songId:n,playlistId:m,musicVideoId:w,amLink:C,forceToMusicDotApple:k,children:A,"aria-label":x,className:U,screenName:_,dataTestId:M,...P}=t,{isUserAuthorized:I}=(0,r.qm)(),L=(0,l.F)(),{link:T,onClick:R,clientbeaconuuid:D}=function(t,e,n){let o,a,{trackId:i,songId:l,musicVideoId:d,playlistId:m}=n,p=null!=t?t:"",{state:{promotionCampaign:w,inApp:C}}=(0,c.useContext)(u.Il),{state:{isClassicalPromo:k}}=(0,c.useContext)(h.z),{ios:A,android:x}=(0,f.Fe)(),{isUserAuthorized:U}=(0,r.qm)(),{state:{webBridge:_}}=(0,c.useContext)(g.B),M=(0,c.useCallback)(async()=>{null==_||_.sendMessage({type:"startIntents",data:{intents:[t]}})},[t,_]),P=w||k;if(A?U||(p=P?v({trackId:i,songId:l,playlistId:m,musicVideoId:d,isClassicalPromo:k}):"".concat(y,"/subscribe")):x?C&&(e=!1,a=M):!U&&P&&(p=v({trackId:i,songId:l,playlistId:m,musicVideoId:d,isClassicalPromo:k})),e&&t&&(a=void 0,p=t),p&&(null==p?void 0:p.indexOf(y))==0){let t=new URL(p),e=t.searchParams;S.forEach(t=>{e.has(t)||e.set(t,b[t])}),o=(0,s.k$)(),e.set("mttnsub2",o||""),p=t.toString()}return{link:p,clientbeaconuuid:o,onClick:a}}(C,k,{trackId:e,songId:n,musicVideoId:w,playlistId:m}),O={providerName:"applemusic",providerDescription:I?"gotoapplemusic":"gotowebflow",store:"applemusic",songId:n,playlistId:m,shazamTrackId:e,type:"open",...P};return(0,o.jsx)(a.UserEventLink,{className:(0,d.Z)(p().link,U),onClick:t=>{R&&(t.preventDefault(),R())},href:T,"aria-label":x,target:"_blank",rel:"noopener",...D?{clientbeaconuuid:D}:{},screenName:_||L||i.m.UNKNOWN,dataTestId:M||"appleMusicLink",...O,children:(0,o.jsx)(o.Fragment,{children:A})})}function v(t){let{trackId:e,songId:n,musicVideoId:o,playlistId:a,isClassicalPromo:i}=t,r="https://www.shazam.com/applemusic";return n?r="https://www.shazam.com/applemusic".concat(i?"classical":"","/song/").concat(n):e&&(r="https://www.shazam.com/applemusic/track/".concat(e)),r}function C(t){let{trackId:e,songId:n,musicVideoId:o}=t,{state:{isClassicalPromo:a}}=(0,c.useContext)(h.z);return v({trackId:e,songId:n,musicVideoId:o,isClassicalPromo:a})}let y="https://music.apple.com";function k(t){return null==t?void 0:t.toLowerCase().startsWith(y)}let b={itsct:"Shazam_web",itscg:"30201",mttnagencyid:"769459046716559743",mttnsiteid:"125115",mttn3pid:"a_custom_779816081798873874",app:"music",mttnsub2:"5348615A-616D-3235-3830-44754D6D5973"},S=Object.keys(b)},91017:function(t,e,n){"use strict";n.d(e,{PageDispatcher:function(){return i},b:function(){return s},z:function(){return a}});var o=n(2265);let a=(0,o.createContext)({state:{isClassicalPromo:null},dispatch:t=>{}});function i(t){let{isClassicalPromo:e}=t,{state:n,dispatch:i}=(0,o.useContext)(a);(0,o.useEffect)(()=>(n.isClassicalPromo!=e&&i({type:"SET_IS_CLASSICAL_PROMO",value:e}),()=>{null!=n.isClassicalPromo&&i({type:"SET_IS_CLASSICAL_PROMO",value:null})}),[null==n?void 0:n.isClassicalPromo,e,i])}function r(t,e){return"SET_IS_CLASSICAL_PROMO"===e.type?{...t,isClassicalPromo:e.value}:t}function s(){let{isClassicalPromo:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isClassicalPromo:null},[e,n]=(0,o.useReducer)(r,{isClassicalPromo:t});return{state:e,dispatch:n}}a.displayName="ShazamPageContext"},71010:function(t,e,n){"use strict";n.d(e,{Fe:function(){return l},KR:function(){return d},QN:function(){return c},Qb:function(){return s}});var o=n(83706),a=n(62128),i=n(2265),r=n(98024);function s(){return(0,i.useMemo)(()=>void 0===window.navigator?{}:new a.Zp(o.Yp).getPlatformInfo(window.navigator.userAgent),[])}function l(){let{state:{platform:t}}=(0,i.useContext)(r.Il);return t}function c(){let{state:{inApp:t}}=(0,i.useContext)(r.Il);return t}let u=["https://l.instagram.com/","http://m.facebook.com/"];function d(){let t;try{t=document.referrer}catch(t){}return t&&u.includes(t)}},59715:function(t,e,n){"use strict";n.d(e,{F:function(){return i}});var o=n(92411),a=n(16463);function i(){let t=(0,a.usePathname)();return(0,o.Xg)(t)}},94076:function(t,e,n){"use strict";let o,a,i,r,s;n.d(e,{k$:function(){return P},kk:function(){return C},po:function(){return y}}),n(77641);let l=null,c=null,u=Date.now(),d=!1,m=!1,p,f,h,g=null,w=0,v=[],C=(t,e,n,i)=>{r=e,s=n,l||(l=new AudioContext),navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSupression:!1},video:!1}).then(function(t){try{c=t,o=l.createMediaStreamSource(t),a=l.createScriptProcessor(4096,1,1),m=!0,crypto.randomUUID(),o.connect(a),a.connect(l.destination),a.onaudioprocess=function(t){let e;if(!m)return;let n=t.inputBuffer;for(let t=0;t<n.numberOfChannels;t++){let o=n.getChannelData(t);w+=n.length,(e=new Float32Array(n.length)).set(o),v.push(e)}},k(i)}catch(t){console.log(t)}}).catch(t=>{s("error",null)})},y=t=>{I(t)},k=t=>{p=setTimeout(function(){S(t)},3e3),f=setTimeout(function(){S(t)},6e3),h=setTimeout(function(){S(t)},9e3),g=setTimeout(function(){d=!0,S(t)},12e3)},b=(t,e)=>{let n=new Float32Array(e),o=0;for(let e=0;e<t.length;e++)n.set(t[e],o),o+=t[e].length;return n},S=t=>{let e=b(v,w);var n,o,a=new Blob([(n=new DataView(new ArrayBuffer(44+2*e.length)),o=l.sampleRate,U(n,0,"RIFF"),n.setUint32(4,36+2*e.length,!0),U(n,8,"WAVE"),U(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,1,!0),n.setUint32(24,o,!0),n.setUint32(28,4*o,!0),n.setUint16(32,2,!0),n.setUint16(34,16,!0),U(n,36,"data"),n.setUint32(40,2*e.length,!0),function(t,e,n){for(var o=0;o<n.length;o++,e+=2){var a=Math.max(-1,Math.min(1,n[o]));t.setInt16(e,a<0?32768*a:32767*a,!0)}}(n,44,e),n)],{type:"audio/wav"});{let t=new FileReader;t.onload=function(){let e=window.open(),n=document.createElement("a");n.setAttribute("href",t.result),n.setAttribute("download","".concat(u,".wav")),e.document.body.appendChild(n),n.click()},(window.URL||window.webkitURL).createObjectURL(a)}A(e,t)},A=(t,e)=>{let n=window.location.origin,o=l.sampleRate;try{x({type:"getSigX",audioF32:t,index:0,sampleRate:o,sigxJSPath:"".concat(n,"/sigx/sigx.js"),inid:e})}catch(t){console.log("could not invoke worker",t)}},x=t=>{let e=window.location.origin,n=new Worker("".concat(e,"/sigx/sigx-worker.js"));n.postMessage({type:"load",url:t.sigxJSPath}),n.addEventListener("message",function(e){switch(e.data.type){case"sigready":_(e.data.index,e.data.signatureArray,t.inid);break;case"error":errorHandler({msg:e.data.msg});break;default:console.log("console",e.data.msg)}},!1);try{n.postMessage(t)}catch(t){console.log(t)}};function U(t,e,n){for(var o=0;o<n.length;o++)t.setUint8(e+o,n.charCodeAt(o))}let _=(t,e,n)=>{fetch("/services/webrec/matchv2",{method:"POST",body:JSON.stringify({data:function(t){for(var e,n=0,o=t.length,a="";n<o;)e=t.subarray(n,Math.min(n+32768,o)),a+=String.fromCharCode.apply(null,e),n+=32768;return window.btoa(a)}(new Uint8Array(e.buffer)),sessionId:P(),inid:n,lang:"en",country:"US"}),headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(M).catch(t=>{console.log("error",t),s("error",null),I()})};function M(t){var e;let{results:n}=null!=t?t:{};if((null==n?void 0:null===(e=n.matches)||void 0===e?void 0:e.length)>0){let t=n.matches[0],e=t.id;I(!0),r(t,e,i),s("match",e)}else d&&I(!1)}let P=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)),I=t=>{o&&a&&c&&(o.disconnect(a),a.disconnect(l.destination),c.getAudioTracks()[0].stop()),clearTimeout(p),clearTimeout(f),clearTimeout(h),clearTimeout(g),m=!1,d=!1,w=0,v=[],c=null,a=null,o=null,p=f=h=g=null,"match"!==t&&("cancel"===t||"no_match"===t)&&s(t,null)}},70225:function(t){t.exports={link:"AppleMusicLink_link__MD7ZC"}}}]);