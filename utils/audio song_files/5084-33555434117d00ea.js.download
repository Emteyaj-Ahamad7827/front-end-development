"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5084],{65084:function(e,a,t){t.d(a,{v9:function(){return g}});var l=t(57437),n={playerBar:"Playerbar-module_playerBar__Cv81G",invisibleButton:"Playerbar-module_invisibleButton__LPi8V",bar:"Playerbar-module_bar__hwod8",infoSection:"Playerbar-module_infoSection__7opJ-",badgeSection:"Playerbar-module_badgeSection__7xmhK",trackerSection:"Playerbar-module_trackerSection__LaoLo",trackerWrapper:"Playerbar-module_trackerWrapper__1co4v",trackerRightGrowSection:"Playerbar-module_trackerRightGrowSection__l5KEo",controlsSection:"Playerbar-module_controlsSection__hw-aH",volumeSection:"Playerbar-module_volumeSection__V5aLG",compactBar:"Playerbar-module_compactBar__PWAm1",compactInfoSection:"Playerbar-module_compactInfoSection__zAGFX",compactSpacedRow:"Playerbar-module_compactSpacedRow__zrEHn",compactSongLabels:"Playerbar-module_compactSongLabels__Em6xx",compactBadgeSection:"Playerbar-module_compactBadgeSection__CiD9s",compactControlsSection:"Playerbar-module_compactControlsSection__OPE2F",thumbnail:"Playerbar-module_thumbnail__1YLy9",songLabels:"Playerbar-module_songLabels__A-JfA",missingSong:"Playerbar-module_missingSong__-HJbh",nowPreviewing:"Playerbar-module_nowPreviewing__l9i6Z",songTitle:"Playerbar-module_songTitle__l7kkh",artistName:"Playerbar-module_artistName__DJezC",badge:"Playerbar-module_badge__Pxgas",appleMusicIcon:"Playerbar-module_appleMusicIcon__pBX4W",currTime:"Playerbar-module_currTime__pPWmv",maxTime:"Playerbar-module_maxTime__fRcda",controlIcons:"Playerbar-module_controlIcons__H44-u",compactControlIcons:"Playerbar-module_compactControlIcons__JcoBB",backPlayPauseNext:"Playerbar-module_backPlayPauseNext__yasG6",disabledBackPlayPauseNext:"Playerbar-module_disabledBackPlayPauseNext__uhJ-C",playpauseCircle:"Playerbar-module_playpauseCircle__b95eN",volbarHolder:"Playerbar-module_volbarHolder__f-TyN",volumeIcon:"Playerbar-module_volumeIcon__1dHgN",ellipisLink:"Playerbar-module_ellipisLink__ELDNG"},s={tracker:"Playerbar-rangeinputs-module_tracker__PVPrC",volbar:"Playerbar-rangeinputs-module_volbar__VMny5"},i=t(83247),r=t(9990),o=t(2265),c=t(55807),u=t(77186),d=t(37376),m=t(40631),p=t(81268),b=t(69364);let y=e=>{let{children:a}=e;return(0,l.jsx)(r.x,{size:"small",weight:"bold",color:"black",className:n.ellipisLink,children:a})},v=e=>{let{children:a}=e;return(0,l.jsx)(r.x,{size:"small",weight:"normal",color:"gray-900",className:n.ellipisLink,children:a})},x=()=>(0,l.jsx)("span",{className:n.badge,children:(0,l.jsx)(i.IconAppleMusic,{className:n.appleMusicIcon})});function g(e){let{storefrontId:a,locale:t,type:s,token:i}=e,{currentSong:r,songProgressSeconds:u,songProgressTotalSeconds:y,isPaused:v,isLoaded:x,volume:g,doesPreviousSongExist:w,doesNextSongExist:E,setProgress:M,setIsPaused:V,setLatestSeek:B,setIsUserScrolling:L,setBeacon:K,setVolume:T}=(0,c.qm)(),{id:z,type:A=m.V.Song}=null!=r?r:{},{data:R}=(0,d.Z)(z,A,{storefrontId:a,locale:t}),[D,G]=(0,o.useState)(null);(0,o.useEffect)(()=>{G(R)},[R]),(0,o.useEffect)(()=>{x||G(null)},[x]);let[W,H]=(0,o.useState)(!1),F=(0,p.B)();"songEmbed"===s&&(F=!0);let{onClickPrevious:J,onClickNext:O}=(0,b.h)({musickitScriptUrl:e.musickitScriptUrl,token:i,storefrontId:a}),U=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(void 0!=D&&(null==U?void 0:U.current)){var e,a;null===(a=U.current)||void 0===a||null===(e=a.style)||void 0===e||e.setProperty("--thumb-color",C(D))}},[D]),(0,o.useEffect)(()=>{document.body.style.setProperty("--track-background","linear-gradient(to right, "+C(D)+" 0%, "+C(D)+" "+(u/y*96+2)+"%, var(--color-gray-300) "+u/y*100+"%, var(--color-gray-300) 100%)")},[u,y]),(0,o.useEffect)(()=>{document.body.style.setProperty("--volume-track-background","linear-gradient(to right, var(--color-blue-300) 0%, var(--color-blue-300) "+(96*g+2)+"%, var(--color-gray-300) "+100*g+"%, var(--color-gray-300) 100%)")},[g]),(0,l.jsxs)("div",{ref:U,className:n.playerBar,children:[F?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f,{...e,positionSeconds:u,setPositionSeconds:M,setLatestSeek:B,setIsUserScrolling:L,maxSeconds:y}),(0,l.jsx)("span",{className:n.compactBar,children:"songEmbed"!=s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(k,{...e,data:D}),(0,l.jsx)(j,{...e,data:D}),(0,l.jsx)(I,{isPaused:v,setIsPaused:V,setBeacon:K,onClickNext:O,hasValidNext:E})]})})]}):(0,l.jsxs)("span",{className:n.bar,children:[(0,l.jsx)(P,{...e,data:D}),(0,l.jsx)(h,{...e}),(0,l.jsx)(_,{positionSeconds:u,setPositionSeconds:M,setLatestSeek:B,setIsUserScrolling:L,maxSeconds:y}),(0,l.jsx)(N,{...e,isPaused:v,setIsPaused:V,setBeacon:K,onClickPrevious:J,onClickNext:O,hasValidNext:E,hasValidPrevious:w}),(0,l.jsx)(S,{...e,isVolbarVisible:W,setIsVolbarVisible:H,volume:g,setVolume:T})]}),(0,l.jsx)("div",{id:"apple-music-video-container",style:{display:"none"}})]})}function P(e){var a,t,s,i,o;let{data:c,...d}=e;return(0,l.jsxs)("span",{className:n.infoSection,children:[c?(0,l.jsx)(u.PB,{className:n.thumbnail,url:null==c?void 0:null===(o=c[0])||void 0===o?void 0:null===(i=o.attributes)||void 0===i?void 0:null===(s=i.artwork)||void 0===s?void 0:null===(t=s.url)||void 0===t?void 0:t.replace("{w}x{h}","300x300"),alt:"song thumbnail",size:"60x60"}):(0,l.jsx)("div",{className:n.thumbnail}),c?(0,l.jsxs)("span",{className:n.songLabels,children:[(0,l.jsx)("span",{className:n.nowPreviewing,children:(0,l.jsx)(r.x,{size:"2xs",weight:"normal",color:"gray-900",children:null!==(a=null==d?void 0:d.strNowPreviewing)&&void 0!==a?a:"NOW PREVIEWING"})}),d.trackTextElement||(0,l.jsx)(y,{children:M(c)}),d.artistTextElement||(0,l.jsx)(v,{children:E(c)})]}):(0,l.jsx)("span",{className:n.songLabels,children:(0,l.jsx)("span",{className:n.missingSong,children:(0,l.jsx)(r.x,{size:"extraSmall",weight:"normal",color:"gray-900"})})})]})}function h(e){return(0,l.jsx)("span",{className:n.badgeSection,children:e.appleMusicBadgeElement||(0,l.jsx)(x,{})})}function _(e){let{positionSeconds:a,setPositionSeconds:t,setLatestSeek:i,setIsUserScrolling:o,maxSeconds:c}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{className:n.trackerSection,children:[(0,l.jsx)("span",{className:n.currTime,children:(0,l.jsx)(r.x,{size:"extraSmall",weight:"normal",color:"gray-900",children:V(a)})}),(0,l.jsx)("input",{className:s.tracker,type:"range",min:"0",max:String(10*c),value:String(10*a),"aria-label":"playerbar",onChange:e=>{t(Number(e.target.value)/10)},onPointerDown:()=>{o(!0)},onPointerUp:()=>{i(a),o(!1)}}),(0,l.jsx)("span",{className:n.maxTime,children:(0,l.jsx)(r.x,{size:"extraSmall",weight:"normal",color:"gray-900",children:V(c)})})]}),(0,l.jsx)("span",{className:n.trackerRightGrowSection})]})}function N(e){var a,t,s,r;let{isPaused:o,setIsPaused:c,setBeacon:u,onClickPrevious:d,onClickNext:m,hasValidNext:p,hasValidPrevious:b,...y}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("span",{className:n.controlsSection,children:(0,l.jsxs)("span",{className:n.controlIcons,children:[b?(0,l.jsx)("button",{className:n.invisibleButton,onClick:()=>{d()},title:null!==(a=null==y?void 0:y.strPrevious)&&void 0!==a?a:"Previous Song",children:(0,l.jsx)(i.IconPlayerbarPrevious,{className:n.backPlayPauseNext})}):(0,l.jsx)(i.IconPlayerbarPrevious,{className:n.disabledBackPlayPauseNext}),(0,l.jsx)("span",{className:n.playpauseCircle,children:o?(0,l.jsx)("button",{className:n.invisibleButton,onClick:()=>{c(!1),u("playerbar")},title:null!==(t=null==y?void 0:y.strPlay)&&void 0!==t?t:"Play",children:(0,l.jsx)(i.IconPlayerbarPlay,{className:n.backPlayPauseNext})}):(0,l.jsx)("button",{className:n.invisibleButton,onClick:()=>{c(!0)},title:null!==(s=null==y?void 0:y.strPause)&&void 0!==s?s:"Pause",children:(0,l.jsx)(i.IconPlayerbarPause,{className:n.backPlayPauseNext})})}),p?(0,l.jsx)("button",{className:n.invisibleButton,onClick:()=>{m()},title:null!==(r=null==y?void 0:y.strNext)&&void 0!==r?r:"Next Song",children:(0,l.jsx)(i.IconPlayerbarNext,{className:n.backPlayPauseNext})}):(0,l.jsx)(i.IconPlayerbarNext,{className:n.disabledBackPlayPauseNext})]})})})}function S(e){var a,t;let{isVolbarVisible:i,setIsVolbarVisible:r,volume:o,setVolume:c,...u}=e;return(0,l.jsx)("span",{className:n.volumeSection,children:i?(0,l.jsxs)("span",{className:n.volbarHolder,children:[(0,l.jsx)("input",{className:s.volbar,type:"range",min:"0",max:100,value:100*o,onChange:e=>{c(parseFloat(e.target.value)/100)}}),(0,l.jsx)("button",{className:n.invisibleButton,onClick:()=>{r(!1)},title:null!==(a=null==u?void 0:u.strVolume)&&void 0!==a?a:"Volume",children:(0,l.jsx)(w,{volume:o})})]}):(0,l.jsx)("button",{className:n.invisibleButton,onClick:()=>{r(!0)},title:null!==(t=null==u?void 0:u.strVolume)&&void 0!==t?t:"Volume",children:(0,l.jsx)(w,{volume:o})})})}function f(e){var a;let{positionSeconds:t,setPositionSeconds:n,setLatestSeek:i,setIsUserScrolling:r,maxSeconds:o,...c}=e;return(0,l.jsx)("input",{"aria-label":null!==(a=c.strPlayerSeekBar)&&void 0!==a?a:"Player seekbar",className:s.tracker,type:"range",min:"0",max:String(10*o),value:String(10*t),onChange:e=>{n(Number(e.target.value)/10)},onPointerDown:()=>{r(!0)},onPointerUp:()=>{i(t),r(!1)}})}function k(e){let{data:a,...t}=e;return(0,l.jsx)("span",{className:n.compactBadgeSection,children:(0,l.jsx)("div",{className:n.badge,children:t.appleMusicBadgeElement||(0,l.jsx)("button",{className:n.badge,onClick:()=>{},style:{background:C(a)},title:"Apple Music",children:(0,l.jsx)(i.IconAppleMusic,{className:n.appleMusicIcon})})})})}function j(e){var a;let{data:t,...s}=e;return(0,l.jsxs)("span",{className:n.compactInfoSection,children:[(0,l.jsx)("span",{className:n.compactGrowingSpacer}),(0,l.jsxs)("span",{className:n.compactSongLabels,children:[(0,l.jsx)("span",{className:n.compactSpacedRow,children:(0,l.jsx)("span",{className:n.nowPreviewing,children:(0,l.jsx)(r.x,{size:"2xs",weight:"normal",color:"gray-900",children:t?null!==(a=null==s?void 0:s.strNowPreviewing)&&void 0!==a?a:"NOW PREVIEWING":""})})}),(0,l.jsx)("span",{className:n.compactSpacedRow,children:s.trackTextElement||(0,l.jsx)(y,{children:M(t)})}),(0,l.jsx)("span",{className:n.compactSpacedRow,children:s.artistTextElement||(0,l.jsx)(v,{children:E(t)})})]}),(0,l.jsx)("span",{className:n.compactGrowingSpacer})]})}function I(e){var a,t,s;let{isPaused:r,setIsPaused:o,setBeacon:c,onClickNext:u,hasValidNext:d,...m}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("span",{className:n.compactControlsSection,children:(0,l.jsxs)("span",{className:n.controlIcons,children:[(0,l.jsx)("span",{className:n.playpauseCircle,children:r?(0,l.jsx)("button",{className:n.invisibleButton,onClick:()=>{o(!1),c("playerbar")},title:null!==(a=null==m?void 0:m.strPlay)&&void 0!==a?a:"Play",children:(0,l.jsx)(i.IconPlayerbarPlay,{className:n.backPlayPauseNext})}):(0,l.jsx)("button",{className:n.invisibleButton,onClick:()=>{o(!0)},title:null!==(t=null==m?void 0:m.strPause)&&void 0!==t?t:"Pause",children:(0,l.jsx)(i.IconPlayerbarPause,{className:n.backPlayPauseNext})})}),d?(0,l.jsx)("button",{className:n.invisibleButton,onClick:()=>{u()},title:null!==(s=null==m?void 0:m.strNext)&&void 0!==s?s:"Next Song",children:(0,l.jsx)(i.IconPlayerbarNext,{className:n.backPlayPauseNext})}):(0,l.jsx)(i.IconPlayerbarNext,{className:n.disabledBackPlayPauseNext})]})})})}function w(e){let{volume:a}=e;return({0:(0,l.jsx)(i.IconVolumeMute,{className:n.volumeIcon}),1:(0,l.jsx)(i.IconVolumeLow,{className:n.volumeIcon}),2:(0,l.jsx)(i.IconVolumeMed,{className:n.volumeIcon}),3:(0,l.jsx)(i.IconVolumeHigh,{className:n.volumeIcon})})[String(Math.ceil(3*a))]}function E(e){var a,t;return null==e?void 0:null===(t=e[0])||void 0===t?void 0:null===(a=t.attributes)||void 0===a?void 0:a.artistName}function M(e){var a,t;return null==e?void 0:null===(t=e[0])||void 0===t?void 0:null===(a=t.attributes)||void 0===a?void 0:a.name}function C(e){var a,t,l,n=null==e?void 0:null===(l=e[0])||void 0===l?void 0:null===(t=l.attributes)||void 0===t?void 0:null===(a=t.artwork)||void 0===a?void 0:a.bgColor;if("string"!=typeof n)return"black";var s=parseInt(n.slice(0,2),16),i=parseInt(n.slice(2,4),16),r=parseInt(n.slice(4,6),16);return s=Math.ceil(.6*s),i=Math.ceil(.6*i),r=Math.ceil(.6*r),"#"+s.toString(16).padStart(2,"0")+i.toString(16).padStart(2,"0")+r.toString(16).padStart(2,"0")}function V(e){return String(Math.floor(e/60)).padStart(2,"0")+":"+String(Math.round(e%60)).padStart(2,"0")}g.AppleMusicBadge=x,g.ArtistText=v,g.TrackText=y},81268:function(e,a,t){t.d(a,{B:function(){return n}});var l=t(2265);function n(){let[e,a]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=()=>{a(window.innerWidth<=768)};return e(),window?.addEventListener("resize",e),()=>window?.removeEventListener("resize",e)}),e}},69364:function(e,a,t){t.d(a,{h:function(){return i}});var l=t(2265),n=t(55807),s=t(40631);function i({token:e,musickitScriptUrl:a,allowPlayBack:t=!0,storefrontId:i}){let{isMusicKitConfigured:r,isUserAuthorized:o,currentSong:c,isLoaded:u,isPaused:d,isUserScrolling:m,latestSeek:p,volume:b,doesPreviousSongExist:y,doesNextSongExist:v,activePageKey:x,setIsMusicKitConfigured:g,setIsUserAuthorized:P,setSongDuration:h,setProgress:_,playPreviousSong:N,playNextSong:S,setIsPaused:f,setIsLoaded:k}=(0,n.qm)(),[j,I]=(0,l.useState)(!1),w=(0,l.useRef)(!1);(0,l.useEffect)(()=>{let e=async()=>{I(!0)};if(!r&&!w.current){document?.addEventListener("musickitloaded",e),w.current=!0;let t=document.createElement("script");t.src=a,t.setAttribute("data-web-components",""),t.defer=!0,document.head.appendChild(t)}return()=>{r||w.current||document?.removeEventListener("musickitloaded",e)}},[r,a]),(0,l.useEffect)(()=>{async function a(){try{await MusicKit.configure({developerToken:e,campaignToken:"Shazam_web_v2",storefrontId:i,app:{name:"Shazam Web",build:"1.0"}}),g(!0)}catch(e){console.log("~~",e)}}e&&j&&a()},[e,j]),(0,l.useEffect)(()=>{r&&!o&&P(MusicKit.getInstance().isAuthorized)},[r,o]);let E=(0,l.useCallback)(()=>{let e=MusicKit.getInstance();v||e.playbackState===MusicKit.PlaybackStates.ended?S():f(!0)},[v]),M=(0,l.useCallback)(()=>{let e=MusicKit.getInstance();y||e.playbackState===MusicKit.PlaybackStates.ended?N():f(!0)},[y]),[C,V]=(0,l.useState)(0);(0,l.useEffect)(()=>{m||_(C)},[m,C]),(0,l.useEffect)(()=>{function e(){let e=MusicKit.getInstance();e.playbackState!=MusicKit.PlaybackStates.stopped&&e.playbackState!=MusicKit.PlaybackStates.ended&&e.playbackState!=MusicKit.PlaybackStates.paused&&(h(e.currentPlaybackDuration),k(!0),_(0),f(!1))}function a(){V(MusicKit.getInstance().currentPlaybackTime)}function t({state:e}){e===MusicKit.PlaybackStates.ended&&E(),e===MusicKit.PlaybackStates.paused&&f(!0)}function l(){P(MusicKit.getInstance().isAuthorized)}if(r){let n=MusicKit.getInstance();n?.addEventListener("mediaCanPlay",e),n?.addEventListener("playbackTimeDidChange",a),n?.addEventListener("playbackStateDidChange",t),n?.addEventListener("mediaPlaybackError",function(e){console.log("err",e)}),n?.addEventListener("authorizationStatusDidChange",l)}return()=>{if(r){let n=MusicKit.getInstance();n?.removeEventListener("mediaCanPlay",e),n?.removeEventListener("playbackTimeDidChange",a),n?.removeEventListener("playbackStateDidChange",t),n?.removeEventListener("authorizationStatusDidChange",l)}}},[E,r]);let B=(0,l.useCallback)(async(e,a)=>{try{a.fallbackType===s.V.MusicVideo&&(e.previewOnly=!0),await e.setQueue({...a.fallbackType===s.V.Song?{song:a.fallbackId}:{musicVideo:a.id},startPlaying:!0,repeatMode:MusicKit.PlayerRepeatMode.none})}catch(e){console.log(e),E()}e.previewOnly=!1},[E]),L=(0,l.useCallback)(async()=>{let e=MusicKit.getInstance(),a=document.getElementById("apple-music-video-container"),t=document.getElementById(x);c.type===s.V.MusicVideo&&t?e.videoContainerElement=t:e.videoContainerElement=a;try{e.isAuthorized||(e.previewOnly=!0),await e.setQueue({...c.type===s.V.MusicVideo?{musicVideo:c.id}:{song:c.id},startPlaying:!0,repeatMode:MusicKit.PlayerRepeatMode.none})}catch(a){await B(e,c),console.log("error!",a)}k(!0),f(!1)},[c,x,B]);return(0,l.useEffect)(()=>{c&&r&&t&&(h(MusicKit.getInstance().currentPlaybackDuration),_(0),L())},[r,c,L,t]),(0,l.useEffect)(()=>{if(r&&u){let e=MusicKit.getInstance();d&&e?.isPlaying?e.pause():d||e?.isPlaying||e?.play()}},[r,d]),(0,l.useEffect)(()=>{r&&MusicKit.getInstance().seekToTime(p)},[p]),(0,l.useEffect)(()=>{r&&(MusicKit.getInstance().volume=b)},[b]),{onClickPrevious:M,onClickNext:E}}},37376:function(e,a,t){t.d(a,{H:function(){return c},Z:function(){return o}});var l=t(2265),n=t(55807),s=t(40631);let i={[s.V.Song]:"songs",[s.V.Artist]:"artists",[s.V.MusicVideo]:"music-videos",[s.V.Playlist]:"playlists",[s.V.Album]:"albums"};async function r(e,a,t){try{let l;let n=MusicKit.getInstance();if(i[a]){let s="",r={l:t?.locale??"en-us",include:"artists,music-videos"};"string"==typeof e?s=`/${e}`:Array.isArray(e)&&(r.ids=e.join(","));let o=`/v1/catalog/${t?.storefrontId??"us"}/${i[a]}${s}`;t?.apis&&(o=`${o}/${t?.apis}`),l=await n.api.music(o,r)}return{data:l?.data?.data}}catch(e){return console.log(e),{data:null,error:!0}}}function o(e,a,t){let{isMusicKitConfigured:s}=(0,n.qm)(),[i,o]=(0,l.useState)(null);return(0,l.useEffect)(()=>{async function l(){let{data:l,error:n}=await r(e,a,t);l&&!n&&o(l)}s&&e&&l()},[e,s]),{data:i}}function c(e){let{isMusicKitConfigured:a}=(0,n.qm)();return(0,l.useCallback)(async function(t,l){return a?r(t,l,e):{data:null}},[e,a])}},40631:function(e,a,t){t.d(a,{V:function(){return n}});var l,n=((l={}).Song="song",l.MusicVideo="musicVideo",l.Artist="artist",l.Playlist="playlists",l.Album="album",l)}}]);